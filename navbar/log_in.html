<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="log_in.css">
</head>

<body>

    <div class="container1">
        <button type="submit" class="btn1" onclick="openpopup()">submit</button>
        <div class="register-form1" id="register-form1">
            <form action="" id="form">
                <p>LOG IN</p>
                <input type="text" id="login_username" placeholder="Username">
                <input type="text" id="login_password" placeholder="Password">
                <p id="pass">Send a new password to my email ID</p>
                <button onclick="login()" type="button" id="submit">Login</button>

                <div id="option">
                    <p>Don't have a account yet?</p><button onclick="Register()" id="signup">Sign Up</button>
                </div>


                <img src="https://www.revv.co.in/imgs/google-login.png" alt="">

                <img src="https://www.revv.co.in/imgs/facebook-icon.png" alt="">
            </form>
            
            

        </div>
    </div>
</body>

</html>


<script>
    let popup = document.querySelector("#register-form1")
    let popup1 = document.querySelector('#register-form')
    function openpopup() {
        popup.classList.add("openpopup")
    }
    function openpopup1() {
        popup1.classList.add("openpopup")
    }

    async function login() {
        let login_data = {
            password: document.getElementById("login_password").value,
            username: document.getElementById("login_username").value,
        }
        console.log(login_data)

        login_data = JSON.stringify(login_data)

        let login_link = 'https://masai-api-mocker.herokuapp.com/auth/login'

        let response = await fetch(login_link, {
            method: "POST",

            body: login_data,

            headers: {
                'Content-Type': 'application/json'
            }
        })

        let data = await response.json()
        console.log(data)


    }


    async function Register(){
        
        let p = document.createElement("p")
        p.innerText = "SIGN UP"
        p.style.marginBottom = 20
        let name = document.createElement("input")
        let mobile = document.createElement("input")
        let description = document.createElement("input")
        let password = document.createElement("input")
        password.setAttribute('id','password')
        password.placeholder = "Password"
        let username = document.createElement("input")
        username.setAttribute('id','username')
        username.placeholder = 'Username'
        let email = document.createElement("input")
        email.setAttribute('id','email')
        email.placeholder = "Email ID"
        let img1 = document.createElement("img")
        img1.src = 'https://www.revv.co.in/imgs/google-login.png'
        let img2 = document.createElement("img")
        img2.src = 'https://www.revv.co.in/imgs/facebook-icon.png'
        let button = document.createElement("button")
        button.innerText = "Proceed"
        button.setAttribute("id","submit")
        button.addEventListener("click",signup)
        let form = document.createElement("form")
        form.append(p,img1,img2,email,username,password,button)


        document.querySelector("#register-form1").innerHTML = ""
        document.querySelector("#register-form1").append(form,button)
        // 
        // // window.location.reload()
    }

    async function signup(){
        popup.classList.remove("openpopup")
        
        let signup_data = {
            name:document.getElementById('username').value ,
            email:document.getElementById('email').value ,
            password:document.getElementById('password').value ,
            username:document.getElementById('username').value ,
            mobile: document.getElementById('username').value ,
            description:document.getElementById('username').value 
        }
        signup_data = JSON.stringify(signup_data)

        let signup_api_link = 'https://masai-api-mocker.herokuapp.com/auth/register'


        let response = await fetch(signup_api_link, {
            method : "POST",

            body:signup_data,

            headers:
            {
                'Content-Type':'application/json'
            }
        })


        let data = await response.json()
        console.log(data)

    }

</script>